<!--
BET-COET-3A 2021-2023
Programmers:
        Trisha Eunis Elicot
        Dana Grace Fulla
        Allora Blesse Lagura
        Jazminn Aira Terencio
Adviser:
        Mr.Jay Victor Gumboc
-->

<!DOCTYPE html>
{% load static %}
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="{% static 'Media/tup_logo.png' %}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.3.5/signature_pad.min.js" integrity="sha512-kw/nRM/BMR2XGArXnOoxKOO5VBHLdITAW00aG8qK4zBzcLVZ4nzg7/oYCaoiwc8U9zrnsO9UHqpyljJ8+iqYiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


    <title>Graduation Form List</title>

</head>

<style>
    .table-icon {
        background-color: #dedede;
        color: #000;
        align-content: center;
    }

    .table-i{
        padding: 0%;
    }

    #all_53:hover,#unapproveds_53:hover, #approveds_53:hover{
        background-color: #c51d3a;
        color: #fff;
    }
    
    .results tr[visible='false'],
    .no-result {
        display: none;
    }
    
    .results tr[visible='true'] {
        display: table-row;
    }
    
    .counter {
        padding: 8px;
        color: #ccc;
    }
    
    .table-sortable th {
        cursor: pointer;
        table-layout: fixed;
    }
    
    .table-sortable .th-sort-asc::after {
        display: inline;
        content: 'asc';
        color: white;
    }
    
    .table-sortable .th-sort-desc::after {
        display: inline;
        content: 'desc';
        color: white;
    }
    
    .table-sortable .th-sort-asc::after,
    .table-sortable .th-sort-desc::after {
        margin-left: 5px;
    }
    
    .table-sortable .th-sort-asc,
    .table-sortable .th-sort-desc {
        background: rgba(0, 0, 0, 0.1);
    }
    
    #list_tbl_53 th.asc:after {
        display: inline;
        content: 'asc';
        color: white;
    }
    
    #list_tbl_53 th.desc:after {
        display: inline;
        content: 'desc';
        color: white;
    }
    
    #list_tbl2_53 th.asc:after {
        display: inline;
        content: 'asc';
        color: white;
    }
    
    #list_tbl2_53 th.desc:after {
        display: inline;
        content: 'desc';
        color: white;
    }
    
    i {
        padding-left: 10px;
    }
    
    hr {
        border-top: 2px solid black;
    }
    
    h1 {
        padding-left: 15px;
        font-weight: bolder;
    }
    
    a {
        font-style: italic;
        color: #000;
    }
    
    p1 {
        font-size: 30px;
    }
    
    p2 {
        font-size: 20px;
        font-weight: bolder;
    }
    
    #backtotop_btn_53 {
        display: inline-block;
        background-color: #E1A19D;
        width: 50px;
        height: 50px;
        text-align: center;
        border-radius: 4px;
        position: fixed;
        bottom: 60px;
        right: 10px;
        transition: background-color .2s, opacity .2s, visibility .2s;
        opacity: 0;
        visibility: hidden;
        z-index: 1000;
    }
    
    #backtotop_btn_53::after {
        content: "\f077";
        font-family: FontAwesome;
        font-weight: normal;
        font-style: normal;
        font-size: 2em;
        line-height: 50px;
        color: #fff;
    }
    
    #backtotop_btn_53:hover {
        cursor: pointer;
        background-color: #c51d3a;
    }
    
    #backtotop_btn_53:active {
        background-color: #555;
    }
    
    #backtotop_btn_53.show {
        opacity: 1;
        visibility: visible;
    }
    
    #list_tbl_53 td {
        border-width: 1px 0;
        border-color: black;
        border-style: solid;
        padding: 2px 10px;
        text-align: center;
        vertical-align: middle;
        overflow-wrap: break-word;
        
        
        
    }
    
    #list_tbl_53 {
        overflow-wrap: break-word;
        white-space: nowrap;
        border-spacing: 0 5px;
        /* table-layout: fixed; */
        width: 100%;
        border-collapse: separate;
        
        
    }
    
   
    
    #list_tbl2_53 {
        border-collapse: separate;
        border-spacing: 0 5px;
        table-layout: fixed;
        width: 99%;
    }
    
    #list_tbl2_53 td {
        border-width: 2px 0;
        border-color: black;
        border-style: solid;
        padding: 5px 15px;
        text-align: center;
        vertical-align: middle;
        overflow-wrap: break-word;

    }
    
    .tab {
        text-decoration: none;
        color: inherit;
        padding: 7px 14px;
        transition: opacity 0.3s;
        display: inline-block;
        border-radius: 3px;
        margin-right: 10px;
        margin-left: 20px;
    }
    
    .tab:hover {
        color: #c51d3a;
    }
    
    .tab-content {
        padding: 6px 12px;
        min-height: 100px;
        animation: fadeEffect 1s;
        padding-bottom: 50px;
    }
    
    a :hover {
        color: #fff;
    }
    
    #dashboard_header_53 {
        padding-left: 50px;
        padding-right: 50px;
        padding: 0 50px 0 50px;
        background-color: #636363;
        padding-top: 5px;
        text-align: center;
    }
    
    #search_box_53 {
        width: 54%;
        border-radius: 30px;
        padding-right: 15px;
        margin: 0 0 10px 6px;
    }
    
    #search_btn_53 {
        border-radius: 10px;
        padding-left: 10px;
        padding-right: 10px;
        margin: 0 0 10px 5px;
    }
    
    #search_btn_53:hover {
        color: #c51d3a;
    }
    
    #list_tbl_53 tbody tr:nth-child(even) {
        background-color: #dedede;
    }
    
    #list_tbl_53 tbody tr:nth-child(odd) {
        background-color: #f5f0f6;
    }
    
    #list_tbl_53 th {
        background-color: #c51d3a;
        color: #ffff;
        text-align: center;
    }
    
    #list_tbl2_53 tbody tr:nth-child(even) {
        background-color: #dedede;
    }
    
    #list_tbl2_53 tbody tr:nth-child(odd) {
        background-color: #f5f0f6;
    }
    
    #list_tbl2_53 th {
        background-color: #c51d3a;
        color: #ffff;
        text-align: center;
    }
    
    #request_box_53 {
        width: auto;
        margin: 0 0 10px 5px;
    }
    
    #schoolyear_box_53 {
        margin: 0 0 10px 5px;
    }
    
    #course_box_53 {
        margin: 0 0 10px 5px;
    }
    
    tr:hover td {
        background-color: #636363;
        color: #fff;
    }
    
    footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        text-align: center;
        height: 40 px;
        background: #424242;
        color: white;
        padding-top: 10px;
    }
    
    button {
        border-radius: 10px;
        background-color: #c51d3a;
        color: white;
    }
    
    button.list_tbl {
        background-color: #c51d3a;
    }
    
    #graduation_header_53 {
        background-color: #c51d3a;
    }
    
    .modal-body {
        background: #e0e0e0;
        box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.125);
        padding: 40px;
    }
    
    #grad_modal_53 td,
    #grad_modal_53 th {
        border: 1px solid #000000;
        text-align: left;
        padding: 8px;
    }
    
    #grad_modal1_53 td,
    #grad_modal1_53 th {
        border: 1px solid #000000;
        text-align: left;
        padding: 8px;
    }
    
    #grad_modal_53 th,
    #grad_modal1_53 th {
        background-color: #c51d3a;
        color: #ffff;
    }
    
    #grad_modal_53 tr:nth-child(odd),
    #grad_modal1_53 tr:nth-child(odd) {
        background-color: #f5f0f6;
    }
    
    #grad_modal_53 tr:nth-child(even),
    #grad_modal1_53 tr:nth-child(even) {
        background-color: #dedede;
    }
    
    #grad_modal_53 tr:hover,
    #grad_modal1_53 tr:hover {
        background-color: #636363;
        color: #ffff;
    }
    
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }
    
    h6 {
        text-align: center;
        color: #ffff;
    }

    #table_main{
        padding: 6px 15px;
        min-height: 100px;
        animation: fadeEffect 1s;
        padding-bottom: 50px;
    }

    .highlight {
     background-color:transparent;
    animation: highlightRow 2s ease-in-out;
    }

    @keyframes highlightRow {
    0%  { background-color: red; }
    100% { background-color: transparent; }
    }

    canvas #signature-pad {
        background: #fff;
        width: 100%;
        height: 100%;
        cursor: crosshair;
    }
 

    .signature_section{
        height: 94%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        right: 0;
        background-color: white;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }

    .table_list {
        transition: margin-right .5s;
        padding: 16px;
    }

    @media screen and (max-height: 450px) {
        .signature_section {padding-top: 15px;}
    }
    .div1 {
    padding-top: 20px;
    width: 99%;
    margin-left: auto;
    margin-right: auto;
    overflow-x:auto;
    
    }

    .div1 table {
        border-spacing: 0;
        
        
    }

    .div1 th {
        background-color: #c51d3a;
        color: #ffff;
        text-align: center;
        padding: 5px;
        width: 100%;
        min-width: 100%;
        position: sticky;
        top: 0;
    }

    .div1 td {
        padding: 2px;
        width: 80px;
        min-width: 80px;
    }

    .div1 th:nth-child(1),
    .div1 td:nth-child(1) {
        position: sticky;
        left: 0px;
        width: 40px;
        min-width: 40px;
        
    }

    .div1 th:nth-child(3),
    .div1 td:nth-child(3) {
        position: sticky;
        left: 40px;
        width: 238px;
        min-width: 238px;
        
    }
    .div1 th:nth-child(4),
    .div1 td:nth-child(4),
    .div1 th:nth-child(5),
    .div1 td:nth-child(5),
    .div1 th:nth-child(6),
    .div1 td:nth-child(6),
    .div1 th:nth-child(7),
    .div1 td:nth-child(7) {
       
        width: 100px;
        min-width: 100px;}
/* 
    .div1 th:nth-child(4),
    .div1 td:nth-child(4) {
        position: sticky;
        left: 278px;
        width: 100px;
        min-width: 100px;
    }

    .div1 th:nth-child(5),
    .div1 td:nth-child(5) {
        position: sticky;
        left: 378px;
        width: 160px;
        min-width: 160px;
    }

    .div1 th:nth-child(6),
    .div1 td:nth-child(6) {
        position: sticky;
        left: 538px;
        width: 100px;
        min-width: 100px;
    }
    */
    /* 
    .div1 td:nth-child(4),
    .div1 td:nth-child(5),
    .div1 td:nth-child(6)
     */
    .div1 td:nth-child(1),
    .div1 td:nth-child(3) {
        background: #ccc;
        z-index: 9999;
    }

    /* 
    .div1 th:nth-child(4),
    .div1 th:nth-child(5),
    .div1 th:nth-child(6)
     */
    .div1 th:nth-child(1),
    .div1 th:nth-child(3){
        z-index: 2;
    }
     /* table{
       min-width: max-content;
    } */
    thead{
        position: sticky;
        top: 0px;
    }
    thead,td{
        padding: 10px;
    }

    .table-wrapper{
        max-height: 300px;
        overflow-y: scroll;

    }
   .outer-wrapper{
    border-radius: 5px;
   
   }

   html {
    font-size: 1rem;
    }
  
    @include media-breakpoint-up(sm) {
        html {
            font-size: 1.2rem;
        }
    }
  
    @include media-breakpoint-up(md) {
        html {
            6font-size: 1.4rem;
        }
    }
  
    @include media-breakpoint-up(lg) {
        html {
            font-size: 1.6rem;
        }
    }

</style>


<body>
    <!--NAVIGATION BAR-->
    <div class="container-fluid" id="dashboard_header_53">
        <a href="{% url 'faculty_dashboard' %}" data-toggle="tooltip" data-placement="right" title="Home" style="font-size:30px;"><i class="fa fa-home">
            </i> </a>
        <a href="{% url 'faculty_dashboard_graduation_list' %}" data-toggle="tooltip" data-placement="right" title="Refresh" style="font-size:25px;"><i class="fa fa-refresh">
            </i> </a>
        <!--SEARCH BAR-->
        <input type="search" class="search" style="width:50%; padding-left: 15px;" id="search_box_53" name="search_box_053" placeholder="Search" onkeyup="searching1(), searching2()" onsearch="OnSearch (this)">

        <!--SEARCH BUTTON
        <a><button onClick="return search()" type = "button" id="search_btn">Search</button></a>-->


    </div>
    
    <!--BACK TO TOP BUTTON-->
    <a id="backtotop_btn_53"></a>

    <!--GRADUATION STATUS MODAL-->
    <div class="modal fade" id="exampleModal_53" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">

                <!--MODAL HEADER-->
                <div class="modal-header" id="graduation_header_53">
                    <h6 class="modal-title" id="modal-header_lbl_53"><b>Completed Subject(To be signed by the responsible officials concerned.)</b></h6>

                    <!--MODAL CLOSE BUTTON-->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" data-toggle="tooltip" data-placement="right" title="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <!--MODAL BODY-->
                <div class="modal-body">
                    <form>

                        <!--SUBJECT TABLE MODAL-->
                        <table class="table-responsive-sm" id="grad_modal_53"><br>
                            <tr>
                                <th>Subject</th>
                                <th>Instructor's Name & Signature</th>
                            </tr>

                            <tr>
                                <td>Subject1</td>
                                <td>Instructor1</td>
                            </tr>
                        </table><br><br>
                        <p>Additional Subjects. (indicate if Day or Evening)</p>

                        <!--ADDITIONAL SUBJECT TABLE MODAL-->
                        <table class="table-responsive-sm" id="grad_modal1_53">
                            <tr>
                                <th>Subject</th>
                                <th>Instructor's Name & Signature</th>
                            </tr>

                            <tr>
                                <td>Subject1</td>
                                <td>Instructor1</td>
                            </tr>
                        </table><br><br>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--MAIN-->
    <h3 style="text-align:center; margin-top: 10px;" id="h3_title">List of Graduation Forms</h3>
    <div class="div">{% include 'html_files/message.html'%}</div>
    <form method="POST" id="valdet">
        {% csrf_token %}
        <!-- <div id="nav_bar_btns">
            <a class="tab"  id="all_53" value="2" >All</a>
            <a class="tab"  id="unapproveds_53" value="UNAPPROVED" >Unapproved Students</a>
            <a class="tab"  id="approveds_53" value="APPROVED" >Approved Students</a>
            
        </div> -->
        <input type="text" hidden name="namedeterminer2" value="{{request.user.full_name}}">
        <input type="text" hidden name="valdeterminer" id="valdeterminer">
        <input type="text" hidden name="statusdeterminer" id="statdeterminer" value="">
    </form>
   
    <!-- <script>
        $('#nav_bar_btns a').click(function(e) {
        var target = $(e.target).attr("value")
        $('input[name=valdeterminer]').val(target);
        $('#valdet').submit()});

        
    </script> -->
    <div class="border pt-2 signature_section" id ="signature_section">
        <div align="right"><button type ="button" class="closebtn bg-danger btn-lg text-white" id ="close_signature" >X</button></div>
        <div class = "p-4" id="show_details">
            <div class="bg-dark p-2"><h3 class = "text-white">APPROVE</h3></div>
        </div>
        
        <input type="text" id="attach_signature_to" hidden>
        <input type = "text" id="subject" hidden>
        <input type ="text" id = "esign_checker" value="{{esign_check}}" hidden>
        <input type = "text" id = "upload_checker" value = "{{uploadsig_check}}" hidden>
        
        <!--CHOOSING APPROVAL SIGNATURE-->
        <div class= "mx-auto" align="center" id="button_area">
            <br>
            <!--ATTACH ESIGN BUTTON-->
            <div class="btn-group col-sm-10 col-md-10 col-xl-10">
                <button type = "button" id = "esign_attach_sig_btn" class ="btn btn-lg bg-danger text-white border p-3 border-dark">LIVE SIGNATURE</button>
                <button type ="button" id="edit_esign_btn" class="btn btn-lg border-dark bg-secondary col-3 p-3 text-white center-block" title="Edit Live E-signature"><i class= "fa fa-edit" style ="font-size:25px;"></i></button><br>
            </div>
            <br>
            <br>
            <!--ATTACH UPLOADED BUTTON-->
            <div class ="btn-group col-sm-10 col-md-10 col-xl-10 ">
                <button type = "button" id = "upload_attach_sig_btn" class ="btn btn-lg bg-dark text-white border p-3 border-white">UPLOADED SIGNATURE</button>
                <button type ="button" id="edit_uploaded_btn" class="btn btn-lg border-darK col-3 bg-secondary p-3 text-white center-block " title="Edit Uploaded Signature"><i class= "fa fa-edit" style ="font-size:25px;"></i></button>
            </div>  
            <br>
            <br>
            <!--APPROVE ONLY-->
            <div class="btn-group col-sm-10 col-md-10 col-xl-10">
                <button type = "button" id = "approve_sig_btn" class ="btn btn-lg bg-light text-dark p-3 border border-dark">APPROVE</button><br>
            </div>
        </div>

        <div id="create_signature_area" class="p-1" hidden>
            <div id = "esignature_display" class = "m-2 mt-3 p-1" align = "center">
            {% if e_signature %}
                <div class = "bg-dark p-2"><h4 class = "text-white">YOUR E-SIGNATURE</h4></div>
                <img src ="{{e_signature.url}}" id ="imgSaved" class="p-1 mt-3 w-40 border border-dark rounded" >
                <label class="lead">Recorded in: <b>{{esignature_datetime}}</b></label>
            {% else %}
                <div clas="p-2 border rounded">NO LIVE E-SIGNATURE SAVED</div>
            {% endif %}
            </div>
            <br>
            <div class = "bg-dark p-2 mt-2"><h4 class = "text-white">DRAW SIGNATURE HERE</h4></div>
            <div class="wrapper border rounded m-2 mt-3 p-1" align = "center">
                <canvas name="signature" id="signature_pad" width="350" height="180" class="m-1"></canvas>
                <button type="button" id="clear" class = "btn-dark text-white col-3 p-1 m-1 btn-lg"><span> Clear </span></button> 
                <button type="button" id="cancel_create" class = "col-3 p-1 m-1 btn-lg"><span> Cancel </span></button> 
            </div>
        </div>
        
        <div id = "upload_signature_display" class = "p-3" hidden>
        {% if uploaded_signature %}
            <div class = "bg-dark p-2"><h4 class = "text-white">YOUR UPLOADED SIGNATURE</h4></div>
            <img src ="{{uploaded_signature.url}}" id ="imgSaved" class="p-1 mt-3 w-100 border border-dark rounded" >
            <label class="lead">Recorded in: <b>{{uploaded_datetime}}</b></label>      
        {% else %}
            <div class="p-2 border rounded">NO UPLOADED SIGNATURE SAVED</div>
        {% endif %}
        </div>
        
        <form method="POST" action ="update_grad_signature/{{id}}" enctype="multipart/form-data">
            {% csrf_token %}
            <textarea id ="image_encoded" name="image_encoded" hidden></textarea>
            <input type="text" name ="id_num" value ="{{id}}" hidden>
            <div id ="upload_signature_area" class="p-2" hidden>
                <div class = "bg-dark p-2 mb-2 mt-2"><h4 class = "text-white">UPLOAD SIGNATURE HERE</h4></div>
                <img id="preview" class="p-1 w-100 border">
                <input id="uploaded_signature_new" type="file" accept="image/*" name= "new_upload_signature" onchange="loadFile(event)">
                <p><label>Note: Please attach an image of your signature with clear and clean white background. Submit it with this file name format: (LASTNAME_FIRSTNAME_MIDDLENAME.jpg/png)<br> See example: <img src="static/Media/sample.png"></label></p>
                <button type="button" id="cancel_upload" class = "col-3 p-1 m-1 btn-lg"><span> Cancel </span></button> 
            </div>
            <div id="submit_signature" class="m-3" align="center" hidden>
                <button type="submit" class="btn btn-dark col-8 text-white btn-lg border border-dark">Save Signature</button>
            </div>
        </form>
        
    </div>

    <div class ="table_list" id = "table_list">
        <form method="POST" action="faculty_dashboard_graduation_list" id="table_main">
            {% csrf_token %}
            <div class="outer-wrapper">
                <div class="table-wrapper">
            <div style="overflow-x:auto;" class="div1">
                <table class="table results table-hover table-sortable table-responsive-sm" id="list_tbl_53">
                    <thead style="height: 70px;">
                        <tr>
                            <th><INPUT type="checkbox" onchange="checkAll(this)" name="chk[]" id="all_check"/></th>
                            <th hidden> # </th>
                            <th>Student's Name</th>
                            <th>Course</th>
                            <th>ID Number</th>
                            <th>Appointment</th> 
                            <th colspan="21" style="text-align: left;">For Approval</th>
                            
                        </tr>
                        <tr class="no_data">
                            <td colspan="27"><i class="fa fa-warning"></i> No Data</td>
                        </tr>
                        <tr class="warning no-result">
                            <td colspan="27"><i class="fa fa-warning"></i> No result</td>
                        </tr>
                    </thead>
                    {% for instance in st %}
                    <tbody> 
                        <tr id="Add"> 
                            <td><input type="checkbox" id="boxes" name="boxes" class="check" value={{instance.id}} onclick="close_boxes(this)"></td>       
                            <td class ="nr" hidden onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.id}}</td>
                            <td class ="name" onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.name}}</td>
                            <td class = "course" onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.course}}</td>
                            <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.student_id}}</td>
                            {%if instance.appointment == "NONE" %}
                            <td><a href="appointmentgrad/{{ instance.id }}/graduation"><button type="button" class="table-icon"><i class="fa fa-comments table-i" aria-hidden="true"></i>  Message</button></a></td>   
                            {% else %}
                            <td>{{instance.appointment}}</td>
                            {% endif %}     
                                  
                            {% if instance.instructor_name == request.user.full_name %}
                                
                                {% if instance.sitsignature == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), sitsubject(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">SIT Subject</button></td>
                                {% elif instance.sitsignature == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">SIT Subject✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty1 == request.user.full_name %}    
                                {% if instance.signature1 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject1(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject1}}</button></td>
                                {% elif instance.signature1 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject1}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty2 == request.user.full_name %}
                                
                                {% if instance.signature2 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject2(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject2}}</button></td>
                                {% elif instance.signature2 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject2}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
    
                            {% if instance.faculty3 == request.user.full_name %}
                                
                                {% if instance.signature3 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject3(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject3}}</button></td>
                                {% elif instance.signature3 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject3}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
    
                            {% if instance.faculty4 == request.user.full_name %}
                                
                                {% if instance.signature4 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject4(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject4}}</button></td>
                                {% elif instance.signature4 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject4}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
    
                            {% if instance.faculty5 == request.user.full_name %}
                                
                                {% if instance.signature5 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject5(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject5}}</button></td>
                                {% elif instance.signature5 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject5}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty6 == request.user.full_name %}
                                
                                {% if instance.signature6 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject6(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject6}}</button></td>
                                {% elif instance.signature6 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject6}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty7 == request.user.full_name %}
                                
                                {% if instance.signature7 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject7(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject7}}</button></td>
                                {% elif instance.signature7 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject7}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty8 == request.user.full_name %}
                                
                                {% if instance.signature8 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject8(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject8}}</button></td>
                                {% elif instance.signature8 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject8}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty9 == request.user.full_name %}
                                
                                {% if instance.signature9 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject9(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject9}}</button></td>
                                {% elif instance.signature9 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject9}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.faculty10 == request.user.full_name %}
                                
                                {% if instance.signature10 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), subject10(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.subject10}}</button></td>
                                {% elif instance.signature10 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.subject10}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty1 == request.user.full_name %}
                                
                                {% if instance.addsignature1 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject1(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject1}}</button></td>
                                {% elif instance.addsignature1 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject1}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty2 == request.user.full_name %}
                                
                                {% if instance.addsignature2 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject2(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject2}}</button></td>
                                {% elif instance.addsignature2 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject2}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty3 == request.user.full_name %}
                                
                                {% if instance.addsignature3 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject3(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject3}}</button></td>
                                {% elif instance.addsignature3 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject3}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty4 == request.user.full_name %}
                                
                                {% if instance.addsignature4 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject4(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject4}}</button></td>
                                {% elif instance.addsignature4 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject4}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty5 == request.user.full_name %}
                                
                                {% if instance.addsignature5 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject5(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject5}}</button></td>
                                {% elif instance.addsignature5 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject5}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty6 == request.user.full_name %}
                                
                                {% if instance.addsignature6 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject6(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject6}}</button></td>
                                {% elif instance.addsignature6 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject6}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty7 == request.user.full_name %}
                                
                                {% if instance.addsignature7 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject7(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject7}}</button></td>
                                {% elif instance.addsignature7 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject7}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty8 == request.user.full_name %}
                                
                                {% if instance.addsignature8 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject8(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject8}}</button></td>
                                {% elif instance.addsignature8 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject8}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty9 == request.user.full_name %}
                                
                                {% if instance.addsignature9 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject9(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject9}}</button></td>
                                {% elif instance.addsignature9 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject9}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                                
                            {% if instance.addfaculty10 == request.user.full_name %}
                                
                                {% if instance.addsignature10 == f_n_unapproved %}
                                <td><button type ="button" class="button user_id apprv" id="open_signature" onclick = "OpenSignature(this), addsubject10(this), document.getElementById('attach_signature_to').value ='{{instance.id}}'">{{instance.addsubject10}}</button></td>
                                {% elif instance.addsignature10 == f_n_approved_esign or f_n_approved_upload or f_n_approved_approve %} 
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">{{instance.addsubject10}}✔️</td>
                                {% else %}
                                <td>—</td>
                                {% endif %}
                                {% else %}
                                <td onclick="window.location='display_gradform/{{ instance.id }}'">—</td>
                                {% endif %}
                        </tr>

                        
                    </tbody>
                    {% endfor %}
                </table>
            </div>
            </div>
            </div>    
        </form>
        <form method="POST" action="faculty_dashboard_graduation_list_all" hidden >
            {% csrf_token %}
            <input type="text" id="id_list" name="id_list" />
            <input type="text" id="sig" name="sig" />
            
            <button type="submit" id="submit_btn_all" hidden/>
        </form>
        <button type ="button" name="approve_all" style="margin-top:30px;margin-left: 25px;" class="button btn-m user_id approve_all" id="open_signature" onclick = "OpenSignature(this)">Approve All</button>
    
    </div>
        <p class="text-center text-bold" id="p6_53"></p>

    </hr>

</body>


<footer>
    <div>
        <p>© Technological University of the Philippines-Cavite</p>
    </div>
</footer>


</html>


<script>
    // DISABLE APPROVE ALL BUTTON WHEN CHECKBOXES CHECKED
    $(function(){
    $("input[type='checkbox']").change(function(){
        var len = $("input[type='checkbox']:checked").length;
        if(len == 0)
            $("button[name='approve_all']").prop("disabled", true);
            
        else
            $("button[name='approve_all']").removeAttr("disabled");
            
    });
    $("input[type='checkbox']").trigger('change');
    });

    // LOW OPACITY OF APPROVE ALL WHEN DISABLED
    $(function(){
    $("input[type='checkbox']").change(function(){
        var len = $("input[type='checkbox']:checked").length;
        if(len == 0)
            $("button[name='approve_all']").css('opacity', '0.5');
        else
            $("button[name='approve_all']").css('opacity', '1');
    });
    $("input[type='checkbox']").trigger('change');
    });

    // DISABLE SINGLE APPROVE BUTTONS IF CHECKBOXES CHECKED
    $(function(){
    $("input[type='checkbox']").change(function(){
        var len = $("input[type='checkbox']:checked").length;
        if(len == 0)
            $("button[class='button user_id apprv']").prop("disabled", false);
            
        else
        $("button[class='button user_id apprv']").prop("disabled", true);
            
    });
    $("input[type='checkbox']").trigger('change');
    });

    // LOW OPACITY OF SINGLE APPROVE BTN WHEN DISABLED
    $(function(){
    $("input[type='checkbox']").change(function(){
        var len = $("input[type='checkbox']:checked").length;
        if(len == 0)
            $("button[class='button user_id apprv']").css('opacity', '1');
        else
            $("button[class='button user_id apprv']").css('opacity', '0.5');
    });
    $("input[type='checkbox']").trigger('change');
    });


// no data by default
    var dattable = document.getElementById("list_tbl_53");
    var rowcount = dattable.tBodies[0].rows.length;

    if (rowcount == '0') {
        $('.no_data').show();
        $('.no-result').hide();
    } else {
        $('.no_data').hide();
        $('.no-result').hide();
    }

    //signature
    var canvas = document.getElementById("signature_pad");
    function resizeCanvas() {
        var ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
    }
    window.onresize = resizeCanvas;
    resizeCanvas();

    var signaturePad = new SignaturePad(canvas, {
     backgroundColor: 'rgb(255,255,255,0)'
    });
    
    document.getElementById("clear").addEventListener('click', function(){
     signaturePad.clear();
    });

    const save_signature = document.querySelector('#save_signature');
    const signature_pad = document.querySelector('#signature_pad');
    const imgConverted = document.querySelector('#imgConverted');

    const ctx = signature_pad.getContext("2d");

    signature_pad.addEventListener("click", function() {
        const dataURI = signature_pad.toDataURL("image/png");
        
        console.log(dataURI);
        document.getElementById('image_encoded').value = dataURI;
        //imgConverted.src = dataURI;
    });

    //show create signature are
    edit_esign_btn.addEventListener("click", function() {
        document.getElementById("create_signature_area").hidden = false;
        document.getElementById("upload_signature_area").hidden = true;
        document.getElementById("signature_pad").width = 350;
        document.getElementById("signature_pad").height = 200;
        document.getElementById("submit_signature").hidden = false;
        document.getElementById("button_area").hidden = true;
        document.getElementById("show_details").hidden = true;
    });

    edit_uploaded_btn.addEventListener("click", function() {
        document.getElementById("create_signature_area").hidden = true;
        document.getElementById("upload_signature_area").hidden = false;
        document.getElementById("submit_signature").hidden = false;
        document.getElementById("button_area").hidden = true;
        document.getElementById("show_details").hidden = true;
        document.getElementById("upload_signature_display").hidden = false;
    });

    cancel_create.addEventListener("click", function() {
        document.getElementById("create_signature_area").hidden =true;
        document.getElementById("submit_signature").hidden = true;
        document.getElementById("upload_signature_area").hidden = true;
        signaturePad.clear();
        document.getElementById('image_encoded').value = "";
        document.getElementById("button_area").hidden = false;
        document.getElementById("show_details").hidden = false;
    });

    cancel_upload.addEventListener("click", function() {
        document.getElementById("upload_signature_area").hidden = true;
        document.getElementById("submit_signature").hidden = true;
        document.getElementById('uploaded_signature_new').value =null;
        document.getElementById('preview').src ="";
        document.getElementById("upload_signature_display").hidden = true;
        document.getElementById("button_area").hidden = false;
        document.getElementById("show_details").hidden = false;
    });

    var loadFile = function(event) {
        var image = document.getElementById('preview');
        image.src=URL.createObjectURL(event.target.files[0]);
    };

    // close signature section when not needed
    function close_boxes(elem){
        document.getElementById("signature_section").style.width = "0";
        document.getElementById("table_list").style.marginRight= "0";
    };

    function OpenSignature(elem){
        document.getElementById("signature_section").style.width = "400px";
        document.getElementById("table_list").style.marginRight = "400px";

        var array = []
        var checkboxes = document.querySelectorAll('input[name=boxes]:checked')

        for (var i = 0; i < checkboxes.length; i++) {
        array.push(checkboxes[i].value)
        }
        document.getElementById('id_list').value= array;
    };
    
    function sitsubject(elem){
        document.getElementById('subject').value = "sitsignature";
    };

    function subject1(elem){
        document.getElementById('subject').value = "signature1";
    };

    function subject2(elem){
        document.getElementById('subject').value = "signature2";
    };

    function subject3(elem){
        document.getElementById('subject').value = "signature3";
    };

    function subject4(elem){
        document.getElementById('subject').value = "signature4";
    };

    function subject5(elem){
        document.getElementById('subject').value = "signature5";
    };

    function subject6(elem){
        document.getElementById('subject').value = "signature6";
    };

    function subject7(elem){
        document.getElementById('subject').value = "signature7";
    };

    function subject8(elem){
        document.getElementById('subject').value = "signature8";
    };

    function subject9(elem){
        document.getElementById('subject').value = "signature9";
    };

    function subject10(elem){
        document.getElementById('subject').value = "signature10";
    };

    function addsubject1(elem){
        document.getElementById('subject').value = "addsignature1";
    };

    function addsubject2(elem){
        document.getElementById('subject').value = "addsignature2";
    };

    function addsubject3(elem){
        document.getElementById('subject').value = "addsignature3";
    };

    function addsubject4(elem){
        document.getElementById('subject').value = "addsignature4";
    };

    function addsubject5(elem){
        document.getElementById('subject').value = "addsignature5";
    };

    function addsubject6(elem){
        document.getElementById('subject').value = "addsignature6";
    };

    function addsubject7(elem){
        document.getElementById('subject').value = "addsignature7";
    };

    function addsubject8(elem){
        document.getElementById('subject').value = "addsignature8";
    };

    function addsubject9(elem){
        document.getElementById('subject').value = "addsignature9";
    };

    function addsubject10(elem){
        document.getElementById('subject').value = "addsignature10";
    };

    esign_attach_sig_btn.addEventListener("click", function() {
        if (document.getElementById('esign_checker').value == ""){
            document.getElementById("create_signature_area").hidden = false;
            document.getElementById("upload_signature_area").hidden = true;
            document.getElementById("signature_pad").width = 350;
            document.getElementById("signature_pad").height = 200;
            document.getElementById("submit_signature").hidden = false;
            document.getElementById("button_area").hidden = true;
            document.getElementById("show_details").hidden = true;
        }else{
            id_list = document.getElementById('id_list').value;
            var id_user = document.getElementById('attach_signature_to').value;
            var sub = document.getElementById('subject').value;
            var sig = "ESIGN";
            if (id_list.length != 0){
                document.getElementById('id_list').value = id_list
                document.getElementById('sig').value= sig
                document.getElementById("submit_btn_all").click()
            }  
            else {
                location.href = "update_graduation/"+id_user+"/"+sub+"/"+sig;
            }
        }
    });

    upload_attach_sig_btn.addEventListener("click", function() {
        if (document.getElementById('upload_checker').value == ""){
            document.getElementById("create_signature_area").hidden = true;
            document.getElementById("upload_signature_area").hidden = false;
            document.getElementById("submit_signature").hidden = false;
            document.getElementById("button_area").hidden = true;
            document.getElementById("show_details").hidden = true;
            document.getElementById("upload_signature_display").hidden = false;
        }else{
            id_list = document.getElementById('id_list').value;
            var id_user = document.getElementById('attach_signature_to').value;
            var sub = document.getElementById('subject').value;
            var sig = "UPLOAD";
            if (id_list.length != 0){
                document.getElementById('id_list').value = id_list
                document.getElementById('sig').value= sig
                document.getElementById("submit_btn_all").click()
            }  
            else {
                location.href = "update_graduation/"+id_user+"/"+sub+"/"+sig;
            }
        }
    });

    approve_sig_btn.addEventListener("click", function() {
        id_list = document.getElementById('id_list').value;
        var id_user = document.getElementById('attach_signature_to').value;
        var sub = document.getElementById('subject').value;
        var sig = "APPROVE";
        if (id_list.length != 0){
            document.getElementById('id_list').value = id_list
            document.getElementById('sig').value= sig
            document.getElementById("submit_btn_all").click()
        }  
        else {
            location.href = "update_graduation/"+id_user+"/"+sub+"/"+sig;
        }
    });

    close_signature.addEventListener("click", function() {
        document.getElementById("signature_section").style.width = "0";
        document.getElementById("table_list").style.marginRight= "0";
        document.getElementById("button_area").hidden = false;
        document.getElementById("show_details").hidden = false;
        document.getElementById("create_signature_area").hidden = true;
        document.getElementById("upload_signature_area").hidden = true;
        document.getElementById("submit_signature").hidden = true;
        document.getElementById("upload_signature_display").hidden = true;
        
    });

    //CHANGE BUTTON TEXT ONCE SIGNATURE IS NONE
    if(document.getElementById('esign_checker').value == ""){
        document.getElementById('esign_attach_sig_btn').textContent = "DRAW E-LIVE SIGNATURE";
    };
    
    if(document.getElementById('upload_checker').value == ""){
        document.getElementById('upload_attach_sig_btn').textContent = "UPLOAD SIGNATURE";
    };

    function openfdb() {
        window.location.replace("{% url 'faculty_dashboard' %}");
    }

    function openfdbg() {
        window.location.replace("{% url 'faculty_dashboard_graduation_list' %}");
    }

    // TAB JS
    var items = document.querySelectorAll('#tabz_53');
    for (var i = 0, len = items.length; i < len; i++) {
        (function() {
                var t, e = this,
                    a = "[data-tab]",
                    n = document.body,
                    r = n.matchesSelector || n.webkitMatchesSelector || n.mozMatchesSelector || n.msMatchesSelector,
                    o = function() {
                        var a = e.querySelectorAll("[data-tab-content]") || [];
                        for (t = 0; t < a.length; t++) a[t].style.display = "none"
                    },
                    i = function(n) {
                        var r = e.querySelectorAll(a) || [];
                        for (t = 0; t < r.length; t++) {
                            var i = r[t],
                                s = i.className.replace("tab-active", "").trim();
                            i.className = s
                        }
                        o(), n.className += " tab-active";
                        var l = n.getAttribute("href"),
                            c = e.querySelector(l);
                        c && (c.style.display = "")
                    },
                    s = e.querySelector(".tab-active" + a);
                s = s || e.querySelector(a), s && i(s), e.addEventListener("click", function(t) {
                    var e = t.target;
                    r.call(e, a) && i(e)
                })
            }
            .bind(items[i]))();
    }

    // TO APPROVE STUDENT
    function deleteRow(r) {
        var i = r.parentNode.parentNode.rowIndex;
        document.getElementById("list_tbl_53").deleteRow(i);
        swal({
            title: "Done",
            text: "Application Approved!",
            icon: "success",
            button: "Ok",
        })
    }


    // TRIGGER ENTER BUTTON
    $("#search_box_53").keyup(function(event) {
        if (event.keyCode === 13) {
            $("#search_btn_53").click();
        }
    });

    // DISALLOW FIRST SPACES IN INPUT BOX JS
    $(function() {
        $('body').on('keydown', '#search_box', function(e) {
            if (e.which === 32 && e.target.selectionStart === 0) {
                return false;
            }
        });
    });

    //MULTIPLE SPACE REMOVER
    $(function() {
        var txt1 = $("#search_box_53");
        var func = function() {
            txt1.val(txt1.val().replace(/\s\s+/g, ' '));
        }
        txt1.keyup(func).blur(func);
    });

    // SEARCH1
    function searching1() {
        $(document).ready(function() {
            $(".search").keyup(function() {
                var searchTerm = $(".search").val();
                var listItem = $('.results tbody').children('tr');
                var searchSplit = searchTerm.replace(/ /g, "'):containsi('")

                $.extend($.expr[':'], {
                    'containsi': function(elem, i, match, array) {
                        return (elem.textContent || elem.innerText || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
                    }
                });

                $(".results tbody tr").not(":containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'false');
                });

                $(".results tbody tr:containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'true');
                });

                var jobCount = $('.results tbody tr[visible="true"]').length;
                $('.counter').text(jobCount + ' item');

                if (jobCount == '0') {
                    $('.no-result').show();
                    $('.no_data').hide();
                } else {
                    $('.no-result').hide();
                }
            });
        });
    }

    // SEARCH2
    function searching2() {
        $(document).ready(function() {
            $(".search").keyup(function() {
                var searchTerm = $(".search").val();
                var listItem = $('.results tbody').children('tr');
                var searchSplit = searchTerm.replace(/ /g, "'):containsi('")

                $.extend($.expr[':'], {
                    'containsi': function(elem, i, match, array) {
                        return (elem.textContent || elem.innerText || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
                    }
                });

                $(".results tbody tr").not(":containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'false');
                });

                $(".results tbody tr:containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'true');
                });

                var jobCount = $('.results tbody tr[visible="true"]').length;
                $('.counter').text(jobCount + ' item');

                if (jobCount == '0') {
                    $('.no-result').show();
                    $('.no_data').hide();
                } else {
                    $('.no-result').hide();
                }
            });
        });
    }

    // SORTING 
    function sortTable(table, col, reverse) {
        var tb = table.tBodies[0], 
            tr = Array.prototype.slice.call(tb.rows, 0), // put rows into array
            i;
        reverse = -((+reverse) || -1);
        tr = tr.sort(function (a, b) { // sort rows
            return reverse // `-1 *` if want opposite order
                * (a.cells[col].textContent.trim() // using `.textContent.trim()` for test
                    .localeCompare(b.cells[col].textContent.trim())
                   );
        });
        for(i = 0; i < tr.length; ++i) tb.appendChild(tr[i]); // append each row in order
    }
    
    function makeSortable(table) {
        var th = table.tHead, i;
        th && (th = th.rows[0]) && (th = th.cells);
        if (th) i = th.length;
        else return; // if no thead then do nothing
        while (--i >= 0) (function (i) {
            var dir = 1;
            th[i].addEventListener('click', function () {sortTable(table, i, (dir = 1 - dir))});
        }(i));
    }
    
    function makeAllSortable(parent) {
        parent = parent || document.body;
        var t = parent.getElementsByTagName('table'), i = t.length;
        while (--i >= 0) makeSortable(t[i]);
    }
    
    window.onload = function () {makeAllSortable();};

    // BACK TO TOP FUNCTION
    var btn = $("#backtotop_btn_53");

    $(window).scroll(function() {
        if ($(window).scrollTop() > 300) {
            btn.addClass("show");
        } else {
            btn.removeClass("show");
        }
    });

    btn.on("click", function(e) {
        e.preventDefault();
        $("html, body").animate({
            scrollTop: 0
        }, "300");
    });

    // REFRESH TABLE WHEN SEARCH X BUTTON PRESSED
    function OnSearch(input) {
        location.reload();
    }

    // PREVENT SCROLLING WHILE SWITCHING TABS
    $('#tabz_53 a').click(function(e) {
        e.preventDefault();
        $(this).tab('show');

        var checked = $(this).find('input').prop('checked');
        $(this).find('input').prop('checked', !checked);
    });

    // RESET SEARCH BAR WHEN BACK BUTTON PRESSED
    $(window).bind("pageshow", function() {

        document.getElementById("search_box_53").value = "";
    });

    $('#appr_btn').on('click', function(){
    $('#Add').addClass('style',"background-color:#eeeeea;color:#000000;font-weight:500;");});
    $("appr_btn").on("click", function () {
    $("tr").each(function () {
        $(this).removeClass("highlight");
    });
    $(this).closest("tr").addClass("highlight");
});

    // ALLOW TO VIEW FORM ON TABLE ROW CLICK
    // function addRowHandlers() {
    //     var table = document.getElementById("list_tbl_53");
    //     var rows = table.getElementsByTagName("tr");
    //     for (i = 0; i < rows.length; i++) {
    //         var currentRow = table.rows[i];
    //         var createClickHandler = 
    //             function(row) 
    //             {
    //                 return function() { 
    //                                 var cell = row.getElementsByTagName("td")[0];
    //                                 var id = cell.innerHTML;
    //                                 location.href = "display_gradform/" + id 
    //                                 };
    //             };

    //         currentRow.onclick = createClickHandler(currentRow);
    //     }
    // }
    // window.onload = addRowHandlers();

    //signature
    var canvas = document.getElementById("signature-pad");
    function resizeCanvas() {
        var ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
    }
    window.onresize = resizeCanvas;
    resizeCanvas();

    var signaturePad = new SignaturePad(canvas, {
     backgroundColor: 'rgb(250,250,250)'
    });
    document.getElementById("clear").addEventListener('click', function(){
     signaturePad.clear();
    })

    // CHECKBOXES IN TABLE
    function checkAll(ele) {
     var checkboxes = document.getElementsByTagName('input');
     if (ele.checked) {
         for (var i = 0; i < checkboxes.length; i++) {
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = true;
             }
         }
     } else {
         for (var i = 0; i < checkboxes.length; i++) {
             console.log(i)
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = false;
                }
            }
        }
    }
    
    
</script>