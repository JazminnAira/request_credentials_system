<!--
BET-COET 2021-2023
Programmers:
        Trisha Eunis Elicot
        Dana Grace Fulla
        Allora Blesse Lagura
        Jazminn Aira Terencio
Adviser:
        Mr.Jay Victor Gumboc
-->

<!DOCTYPE html>
{% load static %}
<html lang="eng">


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="{% static 'Media/tup_logo.png' %}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <title>Request Form</title>
    {% load static %}
    
</head>

<style>
    a.float+div.label-container {
        visibility: hidden;
        opacity: 0;
        transition: visibility 0s, opacity 0.5s ease;
    }
    
    a.float:hover+div.label-container {
        visibility: visible;
        opacity: 1;
    }
    
    a.float:hover {
        color: #fff;
    }

    button {
        background-color: #424242;
        border-radius: 10px;
    }

    h3 {
        color: #ffff;
        background-color: #c51d3a;
        padding: 5px;
        text-align: center;
        font-size: 16px;
    }
    
    label {
        display: inline-block;
        margin: 5px 10px 5px 0;
        width: 200px;
        color: #757575;
        margin-right: 10px;
        font-size: 16px;
    }

    p {
        color: #757575;
        font-size: 16px;
    }

    ul {
        position: fixed;
        left: 0px;
        padding-bottom: 20px;
        bottom: 50px;
        z-index: 100;
    }
    
    ul li {
        list-style: none;
        margin-bottom: 10px;
    }
    
    ul li a {
        background-color: #757575;
        color: #FFF;
        border-radius: 50px;
        text-align: center;
        box-shadow: 2px 2px 3px #999;
        width: 60px;
        height: 60px;
        display: block;
    }
    
    ul:hover {
        visibility: visible!important;
        opacity: 1!important;
    }

    .fa-arrow-left,
    .fa-print,
    .fa-home {
        color: white;
        font-size: 30px;
        padding-top: 15px;
    }

    .float {
        position: fixed;
        width: 60px;
        height: 60px;
        bottom: 20px;
        left: 40px;
        background-color: #c51d3a;
        color: #fff;
        border-radius: 50px;
        text-align: center;
        box-shadow: 2px 2px 3px #dedede;
    }

    .myDiv {
        max-width: 900px;
        width: 100%;
        background: #e0e0e0;
        border: 1px solid #000000;
        margin: 20px auto;
        box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.125);
        padding: 30px;
        /* -webkit-print-color-adjust: exact; */
    }

    #back_btn:hover {
        background-color: #616161;
    }

    #backtotop_btn_pre {
        display: inline-block;
        background-color: #E1A19D;
        width: 50px;
        height: 50px;
        text-align: center;
        border-radius: 4px;
        position: fixed;
        bottom: 30px;
        right: 30px;
        transition: background-color .3s, opacity .5s, visibility .5s;
        opacity: 0;
        visibility: hidden;
        z-index: 1000;
    }
    
    #backtotop_btn_pre::after {
        content: "\f077";
        font-family: FontAwesome;
        font-weight: normal;
        font-style: normal;
        font-size: 2em;
        line-height: 50px;
        color: #fff;
    }
    
    #backtotop_btn_pre:hover {
        cursor: pointer;
        background-color: #c51d3a;
    }
    
    #backtotop_btn_pre:active {
        background-color: #555;
    }
    
    #backtotop_btn_pre.show {
        opacity: 1;
        visibility: visible;
    }

    #button:hover {
        background-color: #616161;
    }

    #course_pre,
    #receiptnum_box_pre,
    #ln_box_pre,
    #fn_box_pre,
    #mn_box_pre {
        background-color: #e7dfe4;
        border: 1px solid #ccc9c9;
    }
    
    #footer {
        background: #424242;
    }

    #home_btn:hover {
        color: white;
        background-color: #d3324d;
    }

    #print_btn:hover {
        background-color: #616161;
    }
    
    @keyframes shine {
        10% {
            opacity: 1;
            top: -30%;
            left: -30%;
            transition-property: left, top, opacity;
            transition-duration: 0.3s, 0.3s, 0.3s;
            transition-timing-function: ease;
        }
        100% {
            opacity: 0;
            top: -30%;
            left: -30%;
            transition-property: left, top, opacity;
        }
    }
 
    @keyframes bot-to-top {
        0% {
            bottom: -40px
        }
        50% {
            bottom: 40px
        }
    }
    
    @keyframes scale-in {
        from {
            transform: scale(0);
            opacity: 0;
        }
        to {
            transform: scale(1);
            opacity: 1;
        }
    }
    
    @keyframes rotate-in {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
    
    @keyframes rotate-out {
        from {
            transform: rotate(360deg);
        }
        to {
            transform: rotate(0deg);
        }
    }

    @media print {
        .float {
            display: none;
        }

        #backtotop_btn_pre {
            display: none;
        }
    }

    @media screen and (max-width: 700px) {
        .myDiv {
            max-width: 900px;
            width: 100%;
            background: #e0e0e0;
            border: 1px solid #000000;
            margin: 0px auto;
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.125);
            padding: 30px;
            /* -webkit-print-color-adjust: exact; */
        }
    }

    @media screen and (max-width: 450px) {
        #backtotop_btn_pre{
            display: none;
        }
    }
</style>


<body>
    {% load static %}
    <!--GET DATA TO DISPLAY IN FORM-->
    {% for i in reqs %}
    <ul>
        <!--PRINT BUTTON ACTIVATOR-->
        <li>
            {% if i.appointment == "NONE" %}
            <a class='button' title="Print Not Available" style="opacity:0.4;" disabled>
                <i class="fa fa-print slash" style="opacity:0.5;"></i>    
            
                </a>
            {% else %}
                <a href="{% url 'req_print' i.id %}" data-toggle="tooltip" data-placement="right" title="Print" id="print_btn">
                    <i class="fa fa-print"></i>
                </a>
            {% endif %}  
            </li>
        <!--REDIETING TO THE SPECIFIC DASHBOARD PER USER TYPE-->
        <li>
            {% if request.user.user_type == "STUDENT" or request.user.user_type == "ALUMNUS" or request.user.user_type == "OLD STUDENT" %}
            <a href="{% url 'student_dashboard' %}" class="float" data-toggle="tooltip" data-placement="right" title="Home" id="home_btn" onclick="reset_form()">
                <i class="fa fa-home"></i>
            </a>
            {% elif request.user.user_type == "REGISTRAR" or request.user.user_type == "STAFF" %}
            <a href="{% url 'registrar_dashboard' %}" class="float" data-toggle="tooltip" data-placement="right" title="Home" id="home_btn" onclick="reset_form()">
                <i class="fa fa-home"></i>
            </a>
            {% endif %}
        </li>

        <li>
            {% if request.user.user_type == "REGISTRAR" %}
            <a href="{% url 'registrar_dashboard_request_list' %}" data-toggle="tooltip" data-placement="right" style="color: #dedede;" id="back_btn" title="Back">
                <i class="fa fa-arrow-left" ></i>
            </a>
            {% endif%}
          
        </li>


    </ul>

    <!--BACK TO TOP BUTTON-->
    <a id="backtotop_btn_pre"></a>


    <!--MAIN-->
    <div class="myDiv" id="myDiv">
        <form method="POST" action="request_form">
            {% csrf_token %}
            <h3><b>REQUEST FORM</b></h3>

            <input type="text" name="id_pre" value="{{i.name}}" hidden>

            <!--THIS IS TO DETERMIN USER TO ABLE TO SHOW THE CHECKING OF REQUIREMENTS EXCLUSIVE ONLY FOR THE ADMIN-->
            <input type="text" id = "userType_pre" name="userType_pre" value="{{request.user.user_type}}" hidden>
            
            <!--NAME BOX-->
            <div class="form-group row">
                <label for="name_pre" class="col-sm-2 col-form-label col-form-label-sm" id="name_lbl_pre" style="padding-right:100px;">Full Name:<span id="asteris_pre" style="color:red;">*</span></label>
                <div class="col-sm-9">
                    <input type="text" id="name_pre" name="name_pre" class="form-control" onkeyup="isEmpty()" value="{{i.name}}" readonly required>
                </div>
            </div>

            <!--COURSE BOX-->
            <div class="form-group row">
                <label for="course_pre" class="col-sm-2 col-form-label col-form-label-sm" id="course_lbl_pre">Course:<span id="asteris_pre" style="color:red;">*</span></label>
                <div class="col-sm-9">
                    <input type="text" id="course_pre" name="course_pre" class="form-control" onkeyup="isEmpty()" value="{{i.course}}" readonly required>
                </div>
            </div>
           
            

            <!--DATE-->
            <div class="form-group row">
                <label for="date_pre" class="col-sm-2 col-form-label col-form-label-sm" id="date_lbl_pre">Date:<span id="asteris_pre" style="color:red;">*</span></label>
                <div class="col-sm-9">
                    <input type="text" id="date_pre" name="date_pre" class="form-control" oninput="isEmpty()" value="{{i.date}}"readonly>
                </div>
            </div>

            <!--CONTROL NUMBER-->
            <div class="form-group row">
                <label for="control_num_pre" class="col-sm-2 col-form-label col-form-label-sm" id="control_num_lbl_pre">Control No.:</label>
                <div class="col-sm-9">
                    <input type="text" id="control_pre" name="control_pre" class="form-control" value ="{{i.control_number}}" readonly>
                </div>
            </div>

            <!--ADDRESS-->
            <div class="form-group row">
                <label for="add_pre" class="col-sm-2 col-form-label col-form-label-sm" id="add_lbl_pre">Address:<span id="asteris_pre" style="color:red;">*</span></label>
                <div class="col-sm-9">
                    <input type="text" id="add_box_pre" name="add_box_pre" class="form-control" placeholder="House No., Street, Subdivision, Brgy., Province" onkeyup="isEmpty()" oninput="this.value = this.value.toUpperCase()" value = "{{i.address}}" readonly required>
                </div>
            </div>

            <!--CONTACT NUMBER-->
            <div class="form-group row">
                <label for="contactnum_pre" class="col-sm-2 col-form-label col-form-label-sm" id="contact_pre">Contact Number:<span id="asteris_pre" style="color:red;">*</span></label>
                <div class="col-sm-9">
                    <input type="text" id="contact_pre" name="contact_pre" class="form-control" value = "{{i.contact_number}}" readonly>
                </div>
            </div>

            <!--CHECK ENROLLED, OLD STUDENT , GRADUATE-->
            {% if i.current_status == "STUDENT" %}
            <div class="form-group row pl-3">
                <div class="form-check form-check-row">
                    <input class="form-check-input chk" type="checkbox" id="currently_enrolled_pre" name="check_status_pre" value="STUDENT" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Currently Enrolled</label>
                </div>
                <div class="form-check form-check-row">
                    <input class="form-check-input chk" type="checkbox" id="old_student_pre" name="check_status_pre" value="OLD STUDENT" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Old Student</label>
                </div>
                <div class="form-check form-check-row">
                    <input class="form-check-input chk" type="checkbox" id="year_graduated_check_pre" name="check_status_pre" value="ALUMNI" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Graduate(year graduated)</label>
                </div>
            </div>
            {% elif i.current_status == "OLD STUDENT" %}
            <div class="form-group row pl-3">
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="currently_enrolled_pre" name="check_status_pre" value="STUDENT" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Currently Enrolled</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="old_student_pre" name="check_status_pre" value="OLD STUDENT" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Old Student</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="year_graduated_check_pre" name="check_status_pre" value="ALUMNI" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Graduate(year graduated)</label>
                </div>
            </div>
            {% else %}
            <div class="form-group row pl-3">
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="currently_enrolled_pre" name="check_status_pre" value="STUDENT" onchange= "choose_enrolled()" oninput ="choose_check()" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Currently Enrolled</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="old_student_pre" name="check_status_pre" value="OLD STUDENT" onchange= "choose_enrolled()" oninput ="choose_check()" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Old Student</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="year_graduated_check_pre" name="check_status_pre" value="ALUMNI" onchange= "choose_enrolled()" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Graduate(year graduated)</label>
                    <input class="form-control chk" type="text" value="{{request.user.year_graduated}}" id="year_graduated_pre" name="year_graduate" placeholder="xxxx-xxxxx" oninput="this.value = this.value.toUpperCase()" onkeypress="return (event.charCode > 64 && event.charCode < 91) ||
                    (event.charCode > 96 && event.charCode < 123) || (event.charCode==32)" readonly>
                </div>
            </div>
            {% endif %}

            <!--REQUESTED CREDENTIALS DISPLAY-->
                <h3><b>REQUEST CREDENTIALS:<em>(Please Check)</em><span id="asteris_pre" style="color:rgb(255, 196, 196);">*</span></b></h3>
                {% if i.request == "Honorable Dismissal" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="HonorableDismissal_check_pre" name="purpose_request_pre" value="Honorable Dismissal" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Honorable Dismissal</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="HonorableDismissal_check_pre" name="purpose_request_pre" value="Honorable Dismissal" disabled>
                    <label class="form-check-label" for="inlineCheckbox1_pre">Honorable Dismissal</label>
                </div>
                {% endif %}
                {% if i.request == "Authentication/Verification" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="authentication_verification" name="purpose_request_pre" value="Authentication/Verification" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox2_pre">Authentication/Verification</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="authentication_verification" name="purpose_request_pre" value="Authentication/Verification" disabled>
                    <label class="form-check-label" for="inlineCheckbox2_pre">Authentication/Verification</label>
                </div>
                {% endif %}
                {% if i.request == "Transcript of Records" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="TranscriptofRecords_check_pre" name="purpose_request_pre" value="Transcript of Records" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox3_pre">Transcript of Records(TOR)</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="TranscriptofRecords_check_pre" name="purpose_request_pre" value="Transcript of Records" disabled>
                    <label class="form-check-label" for="inlineCheckbox3_pre">Transcript of Records(TOR)</label>
                </div>
                {% endif %}
                {% if i.request == "Subject Description" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="subject_description" name="purpose_request_pre" value="Subject Description" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox4_pre">Subject Description</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="subject_description" name="purpose_request_pre" value="Subject Description" disabled>
                    <label class="form-check-label" for="inlineCheckbox4_pre">Subject Description</label>
                </div>
                {% endif%}
                {% if i.request == "Diploma" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Diploma_check_pre" name="purpose_request_pre" value="Diploma" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox5_pre">Diploma</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Diploma_check_pre" name="purpose_request_pre" value="Diploma" disabled>
                    <label class="form-check-label" for="inlineCheckbox5_pre">Diploma</label>
                </div>
                {% endif%}
                {% if i.request == "CAV" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="cav" name="purpose_request_pre" value="CAV" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox6_pre">CAV</label>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="cav" name="purpose_request_pre" value="CAV" disabled>
                    <label class="form-check-label" for="inlineCheckbox6_pre">CAV</label>
                </div>
                {% endif %}
                {% if latest_req == "Certification" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Certification_check_pre" name="purpose_request_pre" value="" checked disabled>
                    <label class="form-check-label" for="inlineCheckbox7_pre">Certification</label>
                    <input class="form-control" type="text" id="certification_box" name="certification_box" class="col-sm-3 col-form-label col-form-label-sm" 
                    oninput="this.value = this.value.toUpperCase()" onkeypress="return (event.charCode > 64 && event.charCode < 91) ||
                     (event.charCode > 96 && event.charCode < 123) || (event.charCode==32)" value ="{{request_cert}}" disabled><br><br>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Certification_check_pre" name="purpose_request_pre" value="" disabled>
                    <label class="form-check-label" for="inlineCheckbox7_pre">Certification</label>
                </div>
                {% endif %}
                {% if latest_req == "Others" %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Others_check_pre" name="purpose_request_pre" checked disabled>
                    <label for="others" id="others_lbl_pre"><em>Others (please specify):</em></label>
                    <input class="form-control" type="text" id="others_box_pre" name="others_box_pre" class="col-sm-3 col-form-label col-form-label-sm" 
                    oninput="this.value = this.value.toUpperCase()" onkeypress="return (event.charCode > 64 && event.charCode < 91) ||
                     (event.charCode > 96 && event.charCode < 123) || (event.charCode==32)" value = "{{request_other}}" disabled><br><br>
                </div>
                {% else %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input chk" type="checkbox" id="Others_check_pre" name="purpose_request_pre" disabled>
                    <label for="others" id="others_lbl_pre"><em>Others (please specify):</em></label>
                </div>
                {% endif %}
                <br>
                <br>

            <!--PURPOSE OF REQUEST-->
            <div class="form-group row">
                <label for="preq_42" class="col-sm-2 col-form-label col-form-label-sm" id="preq_lbl_42">Purpose of Request:</label>
                <div class="col-sm-9">
                    <input type="text" id="purpose" name="purpose" class="form-control" onkeyup="isEmpty()" value="{{i.purpose_of_request_reason}}" oninput="this.value = this.value.toUpperCase()" disabled>
                    <p id="pureq_error_42"></p>
                </div>
            </div>

            <!--PRICE OF REQUESTED CREDENTIALS-->
            <h4 class ="text-dark p-3">AMOUNT : ₱{{i.amount}}</h4>
            {% endfor %}

            <!--IF PREVIOSLY REQUESTED-->
            <input type="text" id="requested" value="{{latest_req}}" hidden>
        </form>
    </div>
    
</body>

</html>

<script>
//POP STRING FOR CERTIFICATION AND OTHERS IN THE TYPE OF CREDENTIALS REQUESTED
    if(document.getElementById("requested").value == "Certification"){
        var cert_data = document.getElementById('certification_box').value;
        var split_cert = cert_data.split(':').pop();
        document.getElementById('certification_box').value = split_cert; 
    }else{
        var ot_data = document.getElementById('others_box_pre').value;
        var split_other = ot_data.split(':').pop();
        document.getElementById('others_box_pre').value = split_other; 
    }
</script>
